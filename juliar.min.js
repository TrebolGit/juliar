function Juliar(e){this.verbose=e||0;var l=this.log="";this.css=function(b){l+=b};this.getcss=function(){return l};this.clearcss=function(){l=""};var m={};this.sethelp=function(b){};this.gethelp=function(b){return m[b]};var d={};jscode=[];this.jscodelength=jscode.length;this.index=function(){return jscode.length};this.code=function(b){jscode.push(b);return jscode.length};this.getcode=function(b){return-1<Number(b)?jscode[b]:jscode};this.clearcode=function(){jscode=[];return""};this.setobject=function(b,
c){return d[b]=c};this.getobject=function(b){return d[b]};this.checkobject=function(b){return d[b]?!0:!1};this.deleteobject=function(b){return d[b]?(d[b]=void 0,!0):!1};this.modules={main:new Juliar_main(this),graph:new Juliar_graph,interpreter:new Juliar_interpreter(this)};var k=document.getElementsByTagName("juliar");e=0;for(var b=k.length;e<b;e++){var c=k[e];c.innerHTML=this.parser(c.innerHTML)}this.modules.interpreter.clearinterpreter();e=document.createElement("meta");e.name="viewport";e.content=
"initial-scale=1.0, maximum-scale=1.0, user-scalable=0";document.getElementsByTagName("head")[0].appendChild(e);""!=this.getcss()&&(e=document.createElement("style"),e.type="text/css",e.innerHTML=this.getcss(),this.clearcss(),document.body.appendChild(e));document.dispatchEvent(new Event("juliar_done"));k=Object.keys(this.modules);e=k.length;for(b=[];e--;)for(var g in this.modules[k[e]])-1==b.indexOf(g)&&"function"===typeof this.modules[k[e]][g]&&b.push({name:g,mods:0<e?k[e]:"",level:e});b.sort(function(b,
c){return b.name<c.name?-1:b.name==c.name?0:1});this.commands=b}
Juliar.prototype.parser=function(e){for(var l=0,m,d=0,k=[];-1!==(l=e.indexOf("*",l));){if("\\"!=e[l-1])if(32===(m=e.charCodeAt(l+1))||42===m||9===m||10===m||isNaN(m))if(void 0===(d=k.pop()))e="<span class='juliar_error'>Code has an extra &#42 </span><br/><em>Position: "+l++ +"</em>";else{var b=e.slice(d,++l);e=e.substr(0,d)+this.picker(b.slice(1,-1))+e.substr(l);l=d-1}else k.push(l);++l}0<k.length&&(e="<span class='juliar_error'>Code is not properly closed </span><br/><em># of missing &#42 : "+k.length+
"</em>");l=0;for(m=this.jscodelength;l<m;l++)d=document.createElement("script"),d.type="text/javascript",d.textContent=this.getcode(l),document.head.appendChild(d);""!=this.getcss()&&(l=document.createElement("style"),l.type="text/css",l.innerHTML=this.getcss(),this.clearcss(),document.body.appendChild(l));return e.replace(/\\\*/g,"*")};
Juliar.prototype.picker=function(e){var l=e.replace(/\s/g," ").split(" ")[0],m=l.length,l=l.split("="),d=l[0],l=void 0===l[1]?[]:e.slice(++d.length,m).split(","),k=d[0];"+"==k?d="add"+d.slice(1):"-"==k?d="subtract"+d.slice(1):"x"==k&&void 0===d[1]?d="multiply"+d.slice(1):"/"==k?d="divide"+d.slice(1):"^"==k?d="power"+d.slice(1):"!"==k?d="not"+d.slice(1):"&"==k?d="and"+d.slice(1):"|"==k?d="or"+d.slice(1):"$"==k?d="root"+d.slice(1):"%"==k?d="remainder"+d.slice(1):"<"==k?"="==d[1]?d="lessthanorequalto"+
d.slice(2):d="lessthan"+d.slice(1):">"==k?"="==d[1]?d="greaterthanorequalto"+d.slice(2):d="greaterthan"+d.slice(1):"="==k?d="equalto"+d.slice(1):parseInt(k)&&(d="zero one two three four five six seven eight nine".split(" ")[d[0]]+d.slice(1));for(var k=Object.keys(this.modules),b=0,c=k.length;b<c;b++)if("function"===typeof this.modules[k[b]][d])return this.modules[k[b]][d](e.substr(m).trim(),l);return"<span class='juliar_error'>Unknown command '"+d+"' </span><br/><em>Arguments: "+l+" </em><br/><em>Content: "+
e.substr(m).trim()+" </em>"};var juliar;document.addEventListener("DOMContentLoaded",function(){juliar=new Juliar});
function Juliar_main(e){function l(){for(var b=Object.keys(e.modules),c=b.length,g=[];c--;)for(var h in e.modules[b[c]])-1==g.indexOf(h)&&"function"===typeof e.modules[b[c]][h]&&g.push({name:h,mods:0<c?b[c]:"",level:c});g.sort(function(b,c){return b.name<c.name?-1:b.name==c.name?0:1});e.commands=g}function m(b,c){for(;0<c;){var g=c;c=b%c;b=g}return b}var d;d="body{font-family: Tahoma, Geneva, sans-serif;background-repeat:no-repeat;background-size:cover;}.center{text-align:center;}.left{text-align:left}.right{text-align:right}.middle{display:block;margin-left:auto;margin-right:auto;}.smaller{font-size:95%}.larger{font-size:105%}.subscript{vertical-align: sub;font-size: smaller;}.superscript{vertical-align: super;font-size: smaller;}";d+=
".underline{text-decoration: underline;}.bold{font-weight: bold;}.italics{font-style: italic;}.crossout{text-decoration: line-through;}.overline{text-decoration: overline;}";d+=".chapter:first-child:first-letter { float: left; color: #903; font-size: 75px; line-height: 60px; padding-top: 4px; padding-right: 8px; padding-left: 3px; }";d+=".marquee{margin: 0 auto;overflow: hidden;white-space: nowrap; box-sizing: border-box;}";d+=".marquee:hover{animation-play-state: paused}@keyframes marquee{0%{ text-indent: 100% }100%{ text-indent: -25% }}";
d+=".progress-bar{background-color: #1a1a1a;height: 25px;padding: 5px;width: 350px;margin: 50px 0;border-radius: 5px;box-shadow: 0 1px 5px #000 inset, 0 1px 0 #444;}";d+=".progress-bar span{display: inline-block;height: 100%;border-radius: 3px;box-shadow: 0 1px 0 rgba(255, 255, 255, .5) inset;transition: width .4s ease-in-out;}";d+="text-shadow: 0 2px 2px rgba(0, 0, 0, 0.3);box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset";d+="transition: all 0.7s ease 0s;}input[type='text'].searchable:focus{width: 200px;}";
d+=".juliar_error{color:red}";d+=".juliar_block{display:block;box-shadow:0 1px 6px rgba(0,0,0,.12);background-color:white;margin: 24px 20px;padding: 10px;animation: fadein 2s;}";d+="@keyframes fadein {from { opacity: 0;bottom:-100px;position:relative; }to   { opacity: 1;bottom:0px;position:relative;}}";d+="@keyframes blink {0%{opacity: 1;}50%{opacity: 0;}100%{opacity: 1;}}";e.css(d);this.block=function(b){return"<span class='juliar_block'>"+b+"</span>"};this.version=function(){return"Language \\*Juliar \\* version Alpha 3. Running on "+
navigator.userAgent};this.help=function(b){if(""==b)return"<span class='juliar_error'>Type \\*help  'command name' \\* to see help for the command</span>";var c=e.gethelp(b.trim());return void 0!==c?c:"<span class='juliar_error'>Help could not be found for '"+b+"' </span>"};this.loop=this.repeat=function(b,c){for(var g=c[0]||2,h=b,e=1;e<g;++e)h+=" "+b+" ";return h};this.evaluate=function(b){return eval(b)};this.condition=function(b,c){if(void 0===c[0])return b;for(var g=0,h=c.length;g<h;++g)if(eval(c[g]))return b;
return""};this.or=function(b){b=b.split(" ");for(var c=0,g=b.length;c<g;++c)if(!1!=JSON.parse(b[c]))return!0;return!1};this.not=function(b,c){return b.split(" ").every(function(b){return!1==JSON.parse(b)})};this.and=function(b,c){return b.split(" ").every(function(b){return!1!=JSON.parse(b)})};this.lessthan=function(b,c){var g=b.split(" "),h=g.shift();return g.every(function(b){return h<b})};this.lessthanorequalto=function(b,c){var g=b.split(" "),h=g.shift();return g.every(function(b){return h<=b})};
this.greaterthan=function(b,c){var g=b.split(" "),h=g.shift();return g.every(function(b){return h>b})};this.greaterthanorequalto=function(b,c){var g=b.split(" "),h=g.shift();return g.every(function(b){return h>=b})};this.equalto=function(b,c){var g=b.split(" "),h=g.shift();return g.every(function(b){return h==b})};this.code=function(b){return b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};this.hide=function(){return""};var k="http://juliar.elementfx.com/repo/?juliar=&package=";
this.repo=function(b){if(""==b.trim())return k;k=b;return"The repo has been now set to "+k};this.checkrepo=function(b){b=new XMLHttpRequest;b.open("GET",k,!1);return b.status=200,"The repo <strong>"+k+"</strong> has a pulse"};this.update=function(){var b=new XMLHttpRequest;b.open("GET",k+"&versions="+Object.keys(e.modules).toString(),!1);return 200==b.status?b.responseText:"<juliar_error>Could not get the updates! Make sure that the repo is active by typing \\*checkrepo \\*</juliar_error>"};this.download=
function(b){var c=b.split("/").pop();if("file:"==window.location.protocol)return"This command cannot run in a local environment";-1===b.indexOf("//")&&(b.split("/"),b=k+c);var g=new XMLHttpRequest;g.open("GET",b,!1);g.send();if(200!=g.status)return"<juliar_error>Cannot download the module. Make sure that you spell the package name correctly.</juliar_error>";var h=document.createElement("a");h.download=c+".juliar";h.href="data:text/plain;base64,"+btoa(g.responseText);document.body.appendChild(h);h.click();
h.parentNode.removeChild(h);return"Downloading '"+c+"' from <a href='"+b+"'>"+b+"</a>"};this.deport=function(b){return void 0===e.modules[b]?'<juliar_error>Module "'+b+'" does not exists</juliar_error>':(delete e.modules[b],l(),document.dispatchEvent(new Event("deleted "+b)),'Deported Module "'+b+'"')};this.javascript=function(b){if(-1!==b.split(" ")[0].indexOf(".js")){var c=document.createElement("script");c.src=b;document.head.appendChild(c);return""}e.code(b);return""};this["import"]=function(b,
c){var g=c[0]||null;if(""===b.trim())return"<juliar_error>You Did not specify what to import! Cannot Continue to Import</juliar_error>";var h=b.slice((b.lastIndexOf(".")-1>>>0)+2)||"juliar",p=b.trim().split("/").pop();if("juliar"==h&&"function"==eval("typeof Juliar_"+p))return delete e.modules[p],g?e.modules[g]=eval("new Juliar_"+p):e.modules[p]=eval("new Juliar_"+p),l(),"Successfully imported module '"+p+"' from cache";if("file:"==window.location.protocol){var d=document.createElement("input");d.type=
"file";d.onchange=function(b){f=b.target.files[0];b=new FileReader;b.onload=function(b){b=b.target.result;var c=f.name.lastIndexOf("."),h=f.name.slice(0,c);".juliar"==f.name.slice(c)?(eval(b),g?e.modules[g]=eval("new Juliar_"+h):e.modules[h]=eval("new Juliar_"+h),l()):".jss"==f.name.slice(c)?(c=document.createElement("style"),c.type="text/css",c.innerHTML=e.parser(b),document.body.appendChild(c)):".j"==f.name.slice(c)?(c=document.createElement("juliar"),c.innerHTML=e.parser(b),document.body.appendChild(c)):
alert("This file type is currently not supported")};b.readAsText(f)};document.body.appendChild(d);d.click();d.parentNode.removeChild(d);return"Let's try to import "+(b||"the file")+" locally..."}if("juliar"==h){d=c[1]||!0;h=new XMLHttpRequest;-1!=b.indexOf("//")?h.open("GET",b,!1):h.open("GET","modules/"+b+".juliar",!1);h.send();if(200!=h.status||-1==h.responseText.indexOf("Juliar_"+p)){if(!1==d)return"<juliar_alert>Failed to Load the module '"+p+"'</juliar_alert>";h=new XMLHttpRequest;h.open("GET",
k+p,!1);h.send();if(200!=h.status)return"<juliar_alert>Failed to Load the module '"+p+"' from Juliar repo</juliar_alert>"}d=document.createElement("script");d.type="text/javascript";d.textContent=h.responseText;document.head.appendChild(d);g?e.modules[g]=eval("new Juliar_"+p):e.modules[p]=eval("new Juliar_"+p);l();return"Successfully imported module '"+p+"'"}if("jss"==h){h=new XMLHttpRequest;-1!=b.indexOf("//")?h.open("GET",b,!1):h.open("GET","modules/"+b+".jss",!1);h.send();if(200!=h.status)return"<juliar_alert>Failed to Load JSS '"+
p+"'</juliar_alert>";d=document.createElement("style");d.type="text/css";d.innerHTML=e.parser(h.responseText);document.body.appendChild(d);return"Successfully loaded JSS '"+p+"'"}if("j"==h){h=new XMLHttpRequest;-1!=b.indexOf("//")?h.open("GET",b,!1):h.open("GET","modules/"+b+".jss",!1);h.send();if(200!=h.status)return"<juliar_alert>Failed to Load Juliar File '"+p+"'</juliar_alert>";d=document.createElement("div");d.innerHTML=e.parser(h.responseText);document.body.appendChild(d);return"Successfully loaded Juliar File '"+
p+"'"}};this.commands=function(b,c){for(var g=b.trim()||!1,h=[],d=Object.keys(e.modules),k=0;k<c.length;k++)Number(c[k])?h.push(d[c[k]]):-1!=d.indexOf(c[k])&&h.push(c[k]);for(var d=e.commands,m=d.length,l="",k=0;k<m;k++)if(!g&&0==h.length||g&&0==d[k].name.indexOf(g)||-1!=h.indexOf(d[k].mods))l+=" \\*"+d[k].name+" \\* ",""!=d[k].mods&&(l+="<em>>> IMPORTED from <strong>"+d[k].mods+"</strong><span class='juliar_error'> level: "+d[k].level+"</span></em>"),l+="<br>";return l};this.count=function(b){return 1<
b.split(",").length?b.split(",").length:b.split(" ").length};this.modules=function(){return Object.keys(e.modules)};this.link=function(b,c){c[0]=c[0]||b;return"<a href='"+b+"' target='"+(!0==!c[1]?"_blank":"_self")+"'>"+c[0]+"</a>"};this.mail=function(b,c){c[0]=c[0]||b;return"<a href='mailto:"+b+"'>"+c[0]+"</a>"};this.store=function(b,c){localStorage.setItem(c[0],b);return b};this.restore=function(b){return localStorage.getItem(b.trim())};this.symbol=function(b){switch(b){case "sigma":return"&Sigma;";
case "delta":return"&Delta;";case "integral":return"";case "plusminus":return"&plusmn;";case "leftright":return"&harr;";case "up":return"&uarr;";case "down":return"&darr;";case "left":return"&larr;";case "right":return"&rarr;";case "doubleleftright":return"&hArr;";case "doubleup":return"&uArr;";case "doubledown":return"&dArr;";case "doubleleft":return"&lArr;";case "doubleright":return"&rArr;";default:return"unknown"}};this.threed=function(b,c){c[0]=c[0]||"0.06em";return"<span style='text-shadow: -"+
c[0]+" 0 red,  "+c[0]+" 0 cyan;'>"+b+"</span>"};this.columns=function(b,c){return"<div style='float:left;width:"+100/(c[0]||1)+"%'>"+b+"</div>"};this["float"]=function(b,c){c[0]=c[0]||"right";return"<span style='float:"+c[0]+";'>"+b+"</span>"};this.sticky=function(b,c){c[0]=c[0]||"initial";c[1]=c[1]||"initial";return"<span style='position:fixed;"+(0>c[0]?"bottom:":"top:")+c[0]+";"+(0>c[1]?"right:":"left:")+c[1]+"'>"+b+"</span>"};this.spoiler=function(b,c){var g=c[0]||"black";e.css(".juliar_spoiler_"+
g+"{ background-color:"+g+";color:"+g+"}.juliar_spoiler_"+g+":hover{background-color:"+(c[1]||"black")+";color:"+(c[2]||"white")+"}");return"<span class='juliar_spoiler_"+g+"'>"+b+"</span>"};this.bullet=function(b){return"<ul><li>"+b+"</li></ul>"};this.visibility=function(b,c){var g=c[0]||40;return"<span style='opacity: "+g/100+";filter: alpha(opacity="+g+");'>"+b+"</span>"};this.color=function(b,c){var g=c[0]||"inherit";if(2>c.length)return"<span style='color: "+g+"'> "+b+"</span>";for(var g="",
h=b.split(" "),k=0,d=0,e=0,m=h.length;e<m;e++)if(k==c.length&&(k=0),-1!=h[e].indexOf("<")&&(d=1),g=0==d?g+("<span style='color: "+c[k++]+"'> "+h[e]+" </span>"):g+(" "+h[e]),-1!=h[e].indexOf(">")){var l=h[e].split("<").length,q=h[e].split(">").length;l>q&&(d=1);q>l&&(d=0)}return g};this.backgroundcolor=function(b,c){c[0]=c[0]||"#428bca";return'<span stlye="background-color:'+c[0]+'">'+b+"</span>"};this.padding=function(b,c){var g=c[0]||"5px";switch(c[1]||"all"){case "all":return"<span style='padding:"+
g+"'>"+b+"</span>";case "top":return"<span style='padding-top:"+g+"'>"+b+"</span>";case "bottom":return"<span style='padding-bottom:"+g+"'>"+b+"</span>";case "left":return"<span style='padding-left:"+g+"'>"+b+"</span>";case "right":return"<span style='padding-right:"+g+"'>"+b+"</span>";case "sides":return"<span style='padding-left:"+g+";padding-right:"+g+"'>"+b+"</span>";case "vertical":return"<span style='padding-left:"+g+";padding-right:"+g+"'>"+b+"</span>";default:return"<span style='padding:"+
g+"'>"+b+"</span>"}};this.notice=function(b,c){return"<div style='background-color:"+(c[0]||"#428bca")+";color:"+(c[1]||"white")+";font-size:"+(c[2]||"16px")+";padding:"+(c[3]||"5px")+";'>"+b+"</div>"};this.ask=function(b,c){return prompt(b,c[0]||"")};this.error=function(b){alert(b);return'<span class="juliar_error">Error invoked: '+b+"</span>"};this.background=function(b){if(-1!=b.indexOf(".")||-1!=b.indexOf("/"))e.code(document.body.style.backgroundImage="url("+b+")");else{var c=b.split(" ");2==
c.length?e.code('document.body.style.background = "linear-gradient( to left top, '+c[1]+", "+c[0]+')";'):e.code("document.body.style.background = '"+c[0]+"';")}return"Background Changed using the following attribute <em>'"+b+"'</em>"};this.list=function(b,c){var g=c[0]||"decimal",h=e.index(),g={decimal:1,lowercase:"a",uppercase:"A",roman:"i",uppercaseroman:"I"}[g]||1,g='var listcat= document.getElementsByTagName("juliar_list_'+h+'")[0];var temp = document.createElement("li");temp.innerHTML = "'+b+
'";if(listcat.previousElementSibling.nodeName != "OL"){'+('temp2 = document.createElement("OL");temp2.type = "'+g+'";listcat.parentNode.insertBefore(temp2, listcat);temp2.appendChild(temp);}'),g=g+"else{listcat.previousElementSibling.appendChild(temp);}",g=g+"listcat.parentNode.removeChild(listcat);";e.code(g);return"<juliar_list_"+h+"></juliar_list_"+h+">"};this.button=function(b,c){b=b||"#";var g=c[0]||"Submit",h=c[1]||"SteelBlue";e.css(".juliar_button_"+h+"{background-color:"+h+";color:white;text-decoration: none;padding: 10px 15px;}");
return"<a href='"+b+"' class='juliar_button_"+h+"'>"+g+"</a>"};this.history=function(){return window.history.length};this.statehistory=function(){return history.state};this.sethistory=function(b,c){history.pushState(c[0]||null,null,b)};this.gethistory=function(b){return IsNumeric(b)?window.history.go(b):window.history.go(juliar_core_globals(b))};this.replacehistory=function(b){history.replaceState(args[0]||null,null,b)};this.pick=function(b,c){var g=c[1]||1,h=[],e="",d=b.split(" ").filter(function(b){return""!==
b}),k=c[0];if(void 0==k)return d[Math.random()*d.length|0];if(!1==JSON.parse(g)&&d.length<k)return'<span class="juliar_error">Not enough elements to pick from</span>';for(var m="",l=0;l<k;++l)if(!1==JSON.parse(g)){for(;-1!=h.indexOf(e=d[Math.random()*d.length|0]););m+=e+" ";h.push(e)}else m+=d[Math.random()*d.length|0]+" ";return m};this.randomize=function(b){b=b.split(" ").filter(function(b){return""!==b});for(var c=b.length,g,h;0!==c;)h=Math.random()*c|0,c-=1,g=b[c],b[c]=b[h],b[h]=g;return b.join(" ")};
this.left=function(b){return"<div class='left'>"+b+"</div>"};this.right=function(b){return"<div class='right'>"+b+"</div>"};this.center=function(b){return"<div class='center'>"+b+"</div>"};this.middle=function(b){return"<div class='middle'>"+b+"</div>"};this.bold=function(b){return"<span class='bold'>"+b+"</span>"};this.italics=function(b){return"<span class='italics'>"+b+"</span>"};this.crossout=function(b){return"<span class='crossout'>"+b+"</span>"};this.overline=function(b){return"<span class='overline'>"+
b+"</span>"};this.subscript=function(b){return"<span class='subscript'>"+b+"</span>"};this.superscript=function(b){return"<span class='superscript'>"+b+"</span>"};this.underline=function(b){return"<span class='underline'>"+b+"</span>"};this.uppercase=function(b){return"<span style='text-transform: uppercase;'>"+b+"</span>"};this.lowercase=function(b){return"<span style='text-transform: lowercase;'>"+b+"</span>"};this.alternatecase=function(b){for(var c="",g=0,h=0,d=b.length;h<d;++h)"<"==b[h]?g=1:
c=0===g?65<=a.charCodeAt(h)&&90>=a.charCodeAt(h)?c+b[h].toLowerCase():c+b[h].toUpperCase():c+b[h],">"==b[h]&&(g=0);return c};this.capitalize=function(b){return"<span style='text-transform: capitalize;'>"+b+"</span>"};this.blur=function(b,c){return"<span style='text-shadow: 0 0 3px "+(c[0]||"black")+";color: transparent;'>"+b+"</span>"};this.smaller=function(b){return"<span class='smaller'>"+b+"</span>"};this.larger=function(b){return"<span class='larger'>"+b+"</span>"};this.shrink=function(b){for(var c=
"",g=0,h=0,d=0,e=b.length;d<e;++d)"<"==b[d]&&(g=1),0===g?(c+="<span class='smaller'>"+b[d],h++):c+=b[d],">"==b[d]&&(g=0);for(d=0;d<h;d++)c+="</span>";return c};this.grow=function(b){for(var c="",g=0,h=0,d=0,e=b.length;d<e;++d)"<"==b[d]&&(g=1),0===g?(c+="<span class='larger'>"+b[d],h++):c+=b[d],">"==b[d]&&(g=0);for(d=0;d<h;d++)c+="</span>";return c};this.highlight=function(b,c){var g=0,h="",d=0;c[0]=c[0]||"orange";for(var e=0,k=b.length;e<k;++e)g==c.length&&(g=0),"<"==b[e]&&(d=1),"\\"==b[e]&&"*"==
b[e+1]?(h+="<span style='background-color:"+c[g++]+"'>\\*</span>",++e):h=0===d?h+("<span style='background-color:"+c[g++]+"'>"+b[e]+"</span>"):h+b[e],">"==b[e]&&(d=0);return h};this.rainbow=function(b,c){var g=0,h="",d=0;c[0]=c[0]||"orange";for(var e=0,k=b.length;e<k;++e)g==c.length&&(g=0),"<"==b[e]&&(d=1),"\\"==b[e]&&"*"==b[e+1]?(h+="<span style='color:"+c[g++]+"'>\\*</span>",++e):h=0===d?h+("<span style='color:"+c[g++]+"'>"+b[e]+"</span>"):h+b[e],">"==b[e]&&(d=0);return h};this.size=function(b,
c){return"<span style='font-size: "+(c[0]||"inherit")+"'> "+b+"</span>"};this.font=function(b,c){var g=c[0]||"inherit";WebFontConfig={google:{families:[g.split(/(?=[A-Z])/).join(" ")+"::latin"]}};var h=document.createElement("script");h.src="//ajax.googleapis.com/ajax/libs/webfont/1/webfont.js";h.type="text/javascript";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(h,d);return"<span style=\"font-family: '"+g.split(/(?=[A-Z])/).join(" ")+"'\"> "+b+"</span>"};this.rotate=
function(b,c){var g=c[0]||350;c[0]=c[0]||"inherit";c[1]=c[1]||"inherit";return"<div style='transform: rotate("+g+"deg);position:relative;"+(0>c[0]?"bottom:":"top:")+c[0]+";"+(0>c[1]?"right:":"left:")+c[1]+"'>"+b+"</div>"};this.reflect=function(b,c){return"<div style='transform: scale"+(c[0]||"X").toUpperCase()+"(-1);'>"+b+"</div>"};this.reverse=function(b){for(var c=b.length,g="";0<c;g+=b[--c]);return g};this.border=function(b,c){return"<span style='border: "+(c[1]||1)+"px "+(c[2]||"solid")+" "+(c[0]||
"black")+"'>"+b+"</span>"};this.outline=function(b,c){var g=c[0]||"orange";return"<span style='text-shadow:-1px -1px 0 "+g+",1px -1px 0 "+g+",-1px 1px 0 "+g+",1px 1px 0 "+g+"'>"+b+"</span>"};this.blink=function(b,c){return"<juliar_blink style='animation: blink "+(c[0]||2)+"s steps("+(c[1]||4)+") infinite;'>"+b+"</juliar_blink>"};this.completedate=function(){var b=new Date,c=b.getYear(),g=(10>b.getDate()?"0":"")+b.getDate();return"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")[b.getDay()]+
", "+"January February March April May June July August September October November December".split(" ")[b.getMonth()]+" "+g+", "+(1E3>c?c+1900:c)};this.date=function(){var b=new Date;return("0"+(b.getMonth()+1)).slice(-2)+"/"+("0"+b.getDate()).slice(-2)+"/"+b.getFullYear()};this.time=function(b){b=new Date;return("0"+b.getHours()).slice(-2)+":"+("0"+b.getMinutes()).slice(-2)+":"+("0"+b.getSeconds()).slice(-2)};this.timezone=function(b){b=(new Date).getTimezoneOffset()/60;return 0<b?"GMT-"+b:"GMT+".Math.abs(b)};
this.ip=function(b){var c=new XMLHttpRequest;c.open("GET","http://ip-api.com/json/"+b,!1);c.send();return JSON.parse(c.responseText).query};this.zipfromip=function(b){var c=new XMLHttpRequest;c.open("GET","http://ip-api.com/json/"+b,!1);c.send();return JSON.parse(c.responseText).zip};this.zonefromip=function(b){var c=new XMLHttpRequest;c.open("GET","http://ip-api.com/json/"+b,!1);c.send();return JSON.parse(c.responseText).timezone};this.regionfromip=function(b){var c=new XMLHttpRequest;c.open("GET",
"http://ip-api.com/json/"+b,!1);c.send();return JSON.parse(c.responseText).regionName};this.locationfromip=function(b){var c=new XMLHttpRequest;c.open("GET","http://ip-api.com/json/"+b,!1);c.send();return JSON.parse(c.responseText).lat+" "+JSON.parse(c.responseText).lon};this.countryfromip=function(b){var c=new XMLHttpRequest;c.open("GET","http://ip-api.com/json/"+b,!1);c.send();return JSON.parse(c.responseText).country};this.cityfromip=function(b){var c=new XMLHttpRequest;c.open("GET","http://ip-api.com/json/"+
b,!1);c.send();return JSON.parse(c.responseText).city};this.isp=function(b){var c=new XMLHttpRequest;c.open("GET","http://ip-api.com/json/"+b,!1);c.send();return JSON.parse(c.responseText).isp};this.newsbanner=function(b,c){return"<div class='marquee' style='animation: marquee "+(c[0]||15)+"s linear infinite;'>"+b+"</div>"};this.newspaper=function(b,c){var g=c[0]||2,g="-webkit-column-count: "+g+";-moz-column-count: "+g+";column-count: "+g+";-webkit-column-gap: 40px;-moz-column-gap: 40px;column-gap: 40px;",
g=g+"-webkit-column-rule: 1px solid lightblue;-moz-column-rule: 1px solid lightblue;column-rule: 1px solid lightblue;";return"<div style='"+g+"'>"+b+"</div>"};this.chapter=function(b){return"<p class='chapter'>"+b+"</p>"};this.picture=function(b,c){return"<img style='max-width: 100%;width:"+(c[0]||"100%")+";height:"+(c[1]||"auto")+";margin:0 auto;' src='"+b+"'/>"};this.pdf=this.flash=this.java=function(b,c){return"file:"==window.location.protocol?"This command cannot run in a local environment":"<object width='"+
(c[0]||420)+"' height='"+(c[1]||315)+"' data='"+b+"'></object>"};this.video=function(b,c){if("file:"==window.location.protocol)return"This command cannot run in a local environment";var g=c[0]||420,h=c[1]||315,d=c[2]||0;return-1!=b.indexOf("//www.youtube.com/watch?v=")?"<iframe width="+g+" height="+h+' src="//www.youtube.com/embed/'+b.split("?v=")[1]+"?autoplay="+{"true":1,"false":0}[!!JSON.parse(d)]+"&t="+(c[3]||0)+'" frameborder="0" allowfullscreen></iframe>':-1!=b.indexOf("//youtu.be/")?"<iframe width="+
g+" height="+h+' src="//www.youtube.com/embed/'+b.split("youtu.be/")[1]+"?autoplay="+{"true":1,"false":0}[!!JSON.parse(d)]+"&t="+(c[3]||0)+'" frameborder="0" allowfullscreen></iframe>':-1!=b.indexOf("//vimeo.com/")?"<iframe width="+g+" height="+h+' src="//player.vimeo.com/video/'+b.split("/").pop()+"?autoplay="+{"true":1,"false":0}[!!JSON.parse(d)]+"#t="+(c[3]||0)+'" frameborder="0" allowfullscreen></iframe>':-1!=b.indexOf("//www.twitch.tv/")?"<iframe width="+g+" height="+h+' src="//www.twitch.tv/'+
b.split("/").pop()+'/embed" frameborder="0"></iframe>':'<video src="'+b+'" controls="controls">Your browser does not support HTML Video</video>'};this.music=function(b){return'<audio src="'+b+'" controls="controls">Your browser does not support HTML Audio</audio>'};this.randomnumber=function(b,c){for(var g=c[0]||1,h=Math.random()*(parseInt(b)||100)+1|0;--g;)h+="\t "+Math.floor(Math.random()*(parseInt(b)||100)+1);return h};this.largenumber=function(){return Number.MAX_VALUE};this.smallnumber=function(){return Number.MIN_VALUE};
this.maximum=function(b){return Math.max.apply(Math,b.split(" "))};this.minimum=function(b){return Math.min.apply(Math,b.split(" "))};this.absolute=function(b){return b.split(" ").map(Math.abs).join(" ")};this.banner=function(b){return"<img style='max-width: 100%;width:"+(args[0]||"100%")+";height:"+(args[1]||"200")+";' src='"+b+"'/>"};this.title=function(b){return"<h1 style='text-align:center'>"+b+"</h1>"};this.decimalcount=function(b){return(b=(""+num).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?
Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0};this.author=function(b){return"<h2 style='text-align:center'>"+b+"</h2>"};this.socket=function(b,c){var g=c[0]||null,h=new WebSocket("wss://"+b);e.setobject("juliar_core_socket_"+g,h);return"Socket Created"};this.setsocket=function(b,c){e.getobject("juliar_core_socket_"+(c[0]||null)).send(b);return"Sent "+b};this.getsocket=function(b,c){var g=e.index();e.code('juliar_core_globals["juliar_core_socket_'+b+'"].onmessage = function (event) {document.getElementsByTagName("juliar_core_sockets_'+
g+")[0].innerHTML = event.data;};");return"<juliar_core_sockets_"+g+"></juliar_core_sockets_"+g+">"};this.set=function(b,c){return e.setobject(c[0],b)};this.get=function(b){return e.getobject(b.trim())};this.fetch=function(b){var c=new XMLHttpRequest;c.open("GET",b,!1);c.send();return c.responseText};this.dynamicset=function(b,c){for(var g=c[0]||null,h=document.getElementsByTagName("juliar_dynamic_"+g),d=0,k=h.length;d<k;d++)h[d].innerHTML=b;e.setobject(g,b);return"<juliar_dynamic_"+g+">"+b+"</juliar_dynamic_"+
g+">"};this.dynamicget=function(b){return"<juliar_dynamic_"+b+">"+e.getobject(b.trim())+"</juliar_dynamic_"+b+">"};this.dynammicfetch=function(b){b="juliar_dynamicfetch_"+e.index();e.code("xmlhttp.onreadystatechange=function(){if (xmlhttp.readyState==4 && xmlhttp.status==200){document.getElementById("+b+').innerHTML=xmlhttp.responseText;}};)xmlhttp.open("GET",str,true);xmlhttp.send();');return"<span id='"+b+"'></span>"};this.dynamicinput=function(b,c){return"<input onblur='juliar_core_dynamicset(this.value,\""+
c[0]+"\")' type='text' value='"+b+"' style='width: 600px;border-top: 0;border-right: 0;border-left: 0;background: transparent;border-color:rgba(0,0,0,0.3)'>"};this.e=function(b){return Math.exp(Number(b)||1)};this.log=function(b,c){return c[0]?Math.log(Number(b)||1)/Math.log(Number(c[0])||10):Math.log(Number(b)||1)};this.pi=function(){return"3.1415926535897932384626433832795028841971693993751058209749445923078164062862089"};this.pythagoras=function(){return"1.4142135623730951"};this.aperys=function(){return"1.2020569"};
this.goldenratio=function(){return"1.618033988749895"};this.mascheroni=function(){return"0.57721"};this.conways=function(){return"1.30357"};this.khinchins=function(){return"2.6854520010"};this.kinkelin=function(){return"1.2824271291"};this.gravity=function(b,c){b=c[0]||b.trim().toLowerCase();switch(b){case "sun":return 274;case "jupiter":return 24.92;case "nepture":return 11.15;case "saturn":return 10.44;case "uranus":case "venus":return 8.87;case "mars":return 3.71;case "mercury":return 3.7;case "pluto":return 0.58;
default:return 9.798}};this.gravitational=function(){return 6.674E-11};this.epsilon=function(b){switch(b){case "Vacuum":return 1;case "Air":return"1.00058986";case "Methanol":return"30";case "Water":return"80";default:return 1}};this.sine=this.sin=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?Math.sin(b*Math.PI/180):Math.sin(b)};this.cosine=this.cos=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?Math.cos(b*Math.PI/180):Math.cos(b)};this.tangent=this.tan=function(b,c){return"degrees"==
c[0]||"360"==c[0]||c[0]?Math.tan(b*Math.PI/180):Math.tan(b)};this.secant=this.sin=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?1/Math.cos(b*Math.PI/180):1/Math.cos(b)};this.cosecant=this.cos=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?1/Math.sin(b*Math.PI/180):1/Math.sin(b)};this.cotangent=this.cot=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?1/Math.tan(b*Math.PI/180):1/Math.tan(b)};this.asin=this.arcsin=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?180*Math.asin(b)/
Math.PI:Math.asin(b)};this.acos=this.arccos=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?180*Math.acos(b)/Math.PI:Math.acos(b)};this.atan=this.arctangent=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?180*Math.atan(b)/Math.PI:Math.atan(b)};this.arcsec=this.arcsecant=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?180*Math.acos(1/b)/Math.PI:Math.acos(1/b)};this.arccsc=this.arccosecant=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?180*Math.asin(1/b)/Math.PI:Math.asin(1/
b)};this.arccot=this.arccotangent=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?180*Math.atan(1/b)/Math.PI:Math.atan(1/b)};this.cosh=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?Math.cosh(b*Math.PI/180):Math.cosh(b)};this.sinh=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?Math.sinh(b*Math.PI/180):Math.sinh(b)};this.tanh=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?Math.tanh(b*Math.PI/180):Math.tanh(b)};this.coth=function(b,c){return"degrees"==c[0]||"360"==c[0]||
c[0]?1/Math.tanh(b*Math.PI/180):1/Math.tanh(b)};this.sech=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?1/Math.cosh(b*Math.PI/180):1/Math.cosh(b)};this.csch=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?1/Math.sinh(b*Math.PI/180):1/Math.sinh(b)};this.asinh=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?180*Math.asinh(b)/Math.PI:Math.asinh(b)};this.acosh=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?180*Math.acosh(b)/Math.PI:Math.acosh(b)};this.atanh=function(b,c){return"degrees"==
c[0]||"360"==c[0]||c[0]?180*Math.atanh(b)/Math.PI:Math.atanh(b)};this.asech=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?180*Math.acosh(1/b)/Math.PI:Math.acosh(1/b)};this.acsch=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?180*Math.asinh(1/b)/Math.PI:Math.asinh(1/b)};this.acotanh=function(b,c){return"degrees"==c[0]||"360"==c[0]||c[0]?180*Math.atanh(1/b)/Math.PI:Math.atanh(1/b)};this.toDegrees=function(b){return 180*b/Math.PI};this.toRadians=function(b){return b*Math.PI/180};this.temperature=
function(b,c){var g=Number(b.trim())||null,h=c[1]||"C";switch(c[0]||"K"){case "F":return"C"==h?5*(g-32)/9:"K"==h?5*(g+459.67)/9:g;case "C":return"K"==h?g+273.15:"F"==h?9*g/5+32:g;case "K":return"C"==h?g-273.15:"F"==h?9*g/5-459.67:g;default:return'<span class="juliar_error">Cannot convert temperature</span>'}};this.root=function(b,c){var g=c[0]||2,h=Math.pow(Math.abs(b),1/g);return g%2?0>b?-h:h:0>b?h+"i":h};this.power=function(b){var c;b.split(" ").forEach(function(b){Number(b)&&(c=null==c?Number(b):
Math.pow(c,b))});return c};this.divide=function(b){var c;b.split(" ").forEach(function(b){Number(b)&&(c=null==c?Number(b):c/Number(b))});return c};this.remainder=function(b){var c;b.split(" ").forEach(function(b){Number(b)&&(c=null==c?Number(b):(c%Number(b)+Number(b))%Number(b))});return c};this.multiply=function(b){var c=1;b.split(" ").forEach(function(b){Number(b)&&(c*=b)});return c};this.add=function(b){var c=0;b.split(" ").forEach(function(b){Number(b)&&(c+=Number(b))});return c};this.subtract=
function(b){var c;b.split(" ").forEach(function(b){Number(b)&&(c=null==c?Number(b):c-Number(b))});return c};this.gcd=function(b,c){for(var g=b.trim().split(" "),h=g[0],d=1;d<g.length;d++)h=m(h,g[d]);return h};this.lcm=function(b,c){for(var g=b.trim().split(" "),h=g[0],d=1;d<g.length;d++)h*=g[d]/m(h,g[d]);return h};this.trash=function(){return e.getobject("null")||e.getobject("undefined")};this.newwindow=function(b){b=b||"http://www.juliar.org";window.open(b,"newWindow");return"Opened "+b+" in new window!"};
this.warnonclose=function(b,c){b=b.trim()||c[0]||!0;if(!1!=JSON.parse(b))return window.onbeforeunload=function(b){if(b=b||window.event)b.returnValue="Are you sure?";return"Are you sure?"},"Browser will warn on close!";window.onbeforeunload="";return"Browser will normally close!"};this.urlparameters=function(){var b=RegExp("[\\?&]"+name+"=([^&#]*)").exec(window.location.href);return b&&b[1]||void 0}}
function Juliar_graph(e){function l(e){if(-1<e.indexOf("^")){for(var d=[];-1<e.indexOf("(");)e=e.replace(/(\([^\(\)]*\))/g,function(e,b){d.push(b);return"___juliar___"+(d.length-1)});d.push(e);for(e="___juliar___"+(d.length-1);-1<e.indexOf("___juliar___");)e=e.replace(RegExp("___juliar___(\\d+)","g"),function(e,b){return d[b].replace(/(\w*)\^(\w*)/g,"Math.pow($1,$2)")})}return e}this.graph=function(e,d){x_val=[];y_val=[];for(var k=0;1E3>k;k++)x_val.push(k),y_val.push(k);for(var k='<svg width=500px height=500px viewBox="0 0 1000 1000"><g>',
k=k+'<line x1="0" y1="500" x2="1000" y2="500" style="stroke:#40454f;stroke-width:2" />',k=k+'<line x1="500" y1="0" x2="500" y2="1000" style="stroke:#40454f;stroke-width:2" />',b=0;b<x_val.length;b++)k+='<circle cx="'+x_val[b]+'" cy="'+(1E3-y_val[b])+'" r="5" stroke="black" stroke-width="1" fill="red" />';k+="</g>";return k+="</svg>"};this.derivative=function(e,d){var k=Number(d[0])||0;e=l(e.trim().replace(/\\\*/g,"*"));e=e.replace(/sin/g,"Math.sin").replace(/cos/g,"Math.cos").replace(/tan/g,"Math.tan").replace(/log/g,
"Math.log").replace(/sqrt/g,"Math.sqrt");for(var b=0;b<e.length;b++)"x"==e[b]&&(!isNaN(parseFloat(e[b-1]))&&isFinite(e[b-1])||"A"<=e[b-1]&&"Z">=e[b-1]||"a"<=e[b-1]&&"z">=e[b-1]||")"==e[b-1])&&(e=e.slice(0,b)+"*"+e.slice(b++));f1=e.replace(/x/g,k+1E-11);f2=e.replace(/x/g,k);return eval("("+f1+"-"+f2+")/0.00000000001")}}
function Juliar_interpreter(e){function l(e,b){for(var c=0;c<b.length;c++)if(0==b[c].name.indexOf(e))return b[c].name;return""}var m;m=".juliar-console{width:99%;background-color: white;font-size:21px;color:#aaa;position:relative;margin-left:14px;}.juliar-console input{font-size:21px;width:100%;margin: 0px;padding:0px;box-shadow: none;}.juliar-console .background{color:#93969b;background-color:white;outline: 0px;position:absolute;left:0px;border: 0px transparent;}";m+=".juliar-console .foreground{position:relative;background-color:transparent;outline: 0px;border: 0px;color:#3498db;}";
m+=".juliar-console .bar{line-height:23px;left:-14px;font-size:21px;color:#93969b;position:absolute;background-color:white;padding-bottom:3px;}";m+="ijuliar{display:inline-block;width:100%;}";m+="ijuliar .realblock{box-shadow:0 1px 6px rgba(0,0,0,.12);background-color:white;margin: 24px 20px;padding: 10px;animation: fadein 2s;}";m+="@keyframes fadein {from { opacity: 0;bottom:-100px;position:relative; }to   { opacity: 1;bottom:0px;position:relative;}}";m+="ijuliar .commandused{font-style: italic;color:#1abc9c;display:inline;}";
m+="ijuliar .commandused:hover{border-bottom: 1px dotted #b6adad;cursor:pointer;padding-bottom:2px;}";m+="ijuliar .time{float:right;color:#D2D5DA;font-style:italic;font-size: 12px;margin-right:5px;}";m+="ijuliar .realblock:hover .juliar_close_btn{display:block;}";m+="ijuliar .juliar_close_btn{float:right;font-size:14px;cursor:pointer;color:#9b9da2;display:none;padding: 0px 20px}";m+="ijuliar .juliar_close_btn:hover{background-color:#40454f;color:white;}";m+="ijuliar .jcontent{transition: opacity 0.5s linear;opacity: 1;height:auto}";
e.css(m);this.clearinterpreter=function(){var k=document.getElementsByTagName("ijuliar"),b=k.length;0!=b&&(e.history=[],e.historyindex=0,e.historytemp="");for(;b--;){var c=k[b];c.innerHTML='<div class="juliar-console"><div class="bar">></div><input class="background"><input class="foreground" placeholder="Enter *Juliar * command here..."></div>';c.addEventListener("keyup",d)}sessionStorage.getItem("juliar_interpreter_history")&&(e.history=sessionStorage.getItem("juliar_interpreter_history").split("*!!!!*"))};
this.deleteinterpreter=function(){var e=document.activeElement.parentNode.parentNode;e.parentNode.removeChild(e);return""};this.downloadcommands=function(e,b){for(var c=b[0]||1,c=JSON.parse(c),g=e.trim()||"output",d=document.activeElement.parentNode.parentNode.getElementsByClassName("commandused"),l=1==c?"<script src='juliar.js'>\r\n<juliar>\r\n":"",m=0;m<d.length;++m)l+=d[m].innerHTML+"\r\n";l+=1==c?"</juliar>":"";d=document.createElement("a");d.download=1==c?g+".html":g+".j";d.href="data:text/plain;base64,"+
btoa(l);document.body.appendChild(d);d.click();d.parentNode.removeChild(d);return"Downloading content from interpreter"};var d=function(d){var b=d.keyCode;d=d.target;String.fromCharCode(b);if(13===b&&""!=d.value){e.historytemp="";e.clearcode();b=d.value;e.history.unshift(b);e.historyindex=0;var c=document.createElement("div");c.className="realblock";var g=new Date;c.innerHTML="<span onclick='(function(element){element.parentNode.removeChild(element);})(this.parentNode)' class='juliar_close_btn'> &#10006;</span><span onclick='(function(element){var el=element.getElementsByClassName(\"jcontent\")[0];if(el.style.opacity == 0){el.style.opacity=1;el.style.height=\"auto\";}else{el.style.opacity=0;el.style.height=0;}})(this.parentNode)' class='juliar_close_btn'> &boxminus; </span><span class='time'>"+
("0"+g.getHours()).slice(-2)+":"+("0"+g.getMinutes()).slice(-2)+":"+("0"+g.getSeconds()).slice(-2)+"</span><div class='commandused' onclick='(function(element){var el = element.parentNode.parentNode.getElementsByClassName(\"foreground\")[0];el.value = element.innerHTML;el.focus();})(this)'>"+b+"</div><hr><div class='jcontent'>"+e.parser(b)+"</div>";d.parentElement.parentNode.insertBefore(c,d.parentElement);d.value="";d.parentNode.getElementsByClassName("background")[0].value="";d.scrollIntoView(!0);
d=0;for(c=e.index();d<c;d++)g=document.createElement("script"),g.type="text/javascript",g.textContent=e.getcode(d),document.head.appendChild(g);sessionStorage.getItem("juliar_interpreter_history")?sessionStorage.setItem("juliar_interpreter_history",sessionStorage.getItem("juliar_interpreter_history")+"*!!!!*"+b):sessionStorage.setItem("juliar_interpreter_history",b);document.dispatchEvent(new Event("juliar_done"))}else if(38===b)0!==e.history.length&&(++e.historyindex,e.historyindex>e.history.length?
(d.value=e.historytemp,e.historyindex=0):d.value=e.history[e.historyindex-1],d.parentNode.getElementsByClassName("background")[0].value="");else if(40===b)0!==e.history.length&&(--e.historyindex,0>e.historyindex?(e.historyindex=e.history.length,d.value=e.history[e.historyindex-1]):d.value=0==e.historyindex?e.historytemp:e.history[e.historyindex-1],d.parentNode.getElementsByClassName("background")[0].value="");else if(39==b){b=d.value;e.historytemp=d.value;for(var h=e.historyindex=0,c=[],g=[];-1!==
(h=b.indexOf("*",h));)"\\"!=b[h-1]&&(32===(nextvalue=b.charCodeAt(h+1))||42===nextvalue||9===nextvalue||10===nextvalue||isNaN(nextvalue)?void 0===(lastindex=c.pop())&&g.push(h):c.push(h)),++h;h=l(b.slice(b.lastIndexOf("*")+1),e.commands);if(1<b.length&&b.length>b.lastIndexOf("*")+1&&""!=h&&b.slice(b.lastIndexOf("*")).length<1+h.length)d.value=b.slice(0,b.lastIndexOf("*")+1)+h;else if(0<g.length)for(;b=g.pop();)d.value=d.value.slice(0,b)+d.value.slice(b+1);else if(0<c.length)for(b=c.length;b--;)d.value+=
" *";d.parentNode.getElementsByClassName("background")[0].value=""}else if(b=d.value,e.historytemp=d.value,e.historyindex=0,1<b.length&&""!=b&&b.length!=b.lastIndexOf("*")+1){(c=l(b.slice(b.lastIndexOf("*")+1),e.commands))?d.parentNode.getElementsByClassName("background")[0].value=d.value.slice(0,b.lastIndexOf("*")+1)+c:d.parentNode.getElementsByClassName("background")[0].value=d.value;h=0;c=[];for(g=0;-1!==(h=b.indexOf("*",h));)"\\"!=b[h-1]&&(32===(nextvalue=b.charCodeAt(h+1))||42===nextvalue||9===
nextvalue||10===nextvalue||isNaN(nextvalue)?void 0===(lastindex=c.pop())&&g++:c.push(h)),++h;if(g)d.parentNode.getElementsByClassName("background")[0].value+=" <<ERROR: There are "+g+" misplaced *";else if(0<c.length){b=c.length;for(tempstr="";b--;)tempstr+=" *";d.parentNode.getElementsByClassName("background")[0].value+=tempstr}}else d.parentNode.getElementsByClassName("background")[0].value=""}};
